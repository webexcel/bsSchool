<ion-header [translucent]="true" *ngIf="!ios">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button>
        <ion-icon [ios]="'menu-sharp'" [md]="'menu-sharp'"></ion-icon>
      </ion-menu-button>
    </ion-buttons>
    <ion-title>{{ "attendance" | translate }}</ion-title>
    <ion-buttons slot="end">
      <ion-button routerDirection="root" routerLink="/dashboard" lines="none" detail="false"
        routerLinkActive="selected">
        <ion-icon name="grid" style="height: 24px; width: 24px"> </ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <pinch-zoom backgroundColor="rgba(0,0,0,0)">
    <div style="height: 100% !important; width: 100%">
      <ion-header collapse="condense" class="mt-4" *ngIf="ios">
        <ion-toolbar class="p-0">
          <ion-buttons slot="start">
            <ion-menu-button><ion-icon class="text-white" [ios]="'menu-sharp'"
                [md]="'menu-sharp'"></ion-icon></ion-menu-button>
          </ion-buttons>
          <ion-title>{{ "attendance" | translate }}</ion-title>
        </ion-toolbar>
      </ion-header>

      <div class="reportcard">
        <app-segment (item)="selected($event)"></app-segment>
        <!-- <ion-card class="card-cls">
      <ion-card-content>
        <table class="custom-table">
          <thead>
            <tr>
              <th>Department</th>
              <th>Period</th>
              <th>Theory (%)</th>
              <th>Practical (%)</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let s of data">
              <td>{{ s.department }}</td>
              <td>{{ s.period_name }}</td>
              <td>{{ s.Theory }}</td>
              <td>{{ s.Practical }}</td>
            </tr>
          </tbody>
        </table>
      </ion-card-content>
    </ion-card> -->
        <!-- <app-segment (item)="selected($event)"></app-segment> -->

        <ion-row>
          <ion-col size="2">
            <ion-button fill="clear" (click)="back()">
              <ion-icon name="arrow-back" slot="icon-only"></ion-icon>
            </ion-button>
          </ion-col>

          <ion-col size="8" class="ion-text-center">
            <h2>{{ viewTitle }}</h2>
          </ion-col>

          <ion-col size="2">
            <ion-button fill="clear" (click)="next()">
              <ion-icon name="arrow-forward" slot="icon-only"></ion-icon>
            </ion-button>
          </ion-col>
        </ion-row>
        <calendar [eventSource]="eventSource" [calendarMode]="calendar.mode" [currentDate]="calendar.currentDate"
          (onEventSelected)="onEventSelected($event)" (onTitleChanged)="onViewTitleChanged($event)" [startHour]="6"
          [endHour]="20" [step]="30" [startingDayWeek]="1" [monthviewDisplayEventTemplate]="template">
        </calendar>

        <ng-template #template let-view="view" let-row="row" let-col="col">
          <div [class.with-event]="view.dates[row*7+col].events.length">
            {{view.dates[row*7+col].label}}
            <div class="indicator-container">
              <div class="event-indicator" *ngFor="let e of view.dates[row*7+col].events; let i = index"></div>
            </div>
          </div>
        </ng-template>

        <div style="margin: 20px;">
          <ion-label style="border: 1px solid #cdcbcb; border-radius: 5px; display: block; padding: 10px;">Total Days of
            Absent : {{absentCount}}</ion-label>
        </div>

        <ion-card *ngFor="let d of data.detail; let i = index">
          <ion-card-content>
            <div style="display: flex; justify-content: space-between; padding: 10px;">
              <ion-label style="color: #5886FE;">{{ d.NAME }}</ion-label>
              <ion-label style="color: #269201;">{{ d.CLASSSEC }}</ion-label>
              <ion-label style="color: #FA7E02;">{{ formatDate(d.absent) }}</ion-label>
            </div>
          </ion-card-content>
        </ion-card>

        <!-- <div class="attendance calendar">
          <ion-card class="card-cls">
            <ion-card-content>
              <div class="calendar-body">
                <ion-grid>
                  <ion-row class="calendar-month">
                    <ion-col (click)="goToLastMonth()" class="col-2">
                      <ion-icon [md]="'arrow-back'" [ios]="'arrow-back'"></ion-icon>
                    </ion-col>
                    <ion-col class="text-center col-8">{{ currentMonth | translate }} {{ currentYear }}</ion-col>
                    <ion-col (click)="goToNextMonth()" class="text-right col-2">
                      <ion-icon [md]="'arrow-forward'" [ios]="'arrow-forward'"></ion-icon>
                    </ion-col>
                  </ion-row>
                  <ion-row class="calendar-weekday">
                    <ion-col>{{ "su" | translate }}</ion-col>
                    <ion-col>{{ "mo" | translate }}</ion-col>
                    <ion-col>{{ "tu" | translate }}</ion-col>
                    <ion-col>{{ "we" | translate }}</ion-col>
                    <ion-col>{{ "th" | translate }}</ion-col>
                    <ion-col>{{ "fr" | translate }}</ion-col>
                    <ion-col>{{ "sa" | translate }}</ion-col>
                  </ion-row>
                  <ion-row class="calendar-date">
                    <ion-col col-1 col1 *ngFor="let lastDay of daysInLastMonth" class="last-month">{{ lastDay
                      }}</ion-col>
                    <ion-col col-1 col1 *ngFor="let day of daysInThisMonth" [class.aub]="day.aub"
                      [class.currentDate]="currentDate === day.num && !day.aub">
                      {{ day.num }}
                    </ion-col>
                    <ion-col col-1 col1 *ngFor="let nextDay of daysInNextMonth" class="next-month">{{ nextDay
                      }}</ion-col>
                  </ion-row>
                </ion-grid>
              </div>
            </ion-card-content>
          </ion-card>
          <ion-card class="card-cls">
            <ion-card-header>
              No. Of Days Absent -- {{absentCount}}
            </ion-card-header>
            <ion-card-content>
              <table class="custom-table">
                <thead>
                  <th>#</th>
                  <th>{{ "name" | translate }}</th>
                  <th>
                    {{ "class" | translate }}
                  </th>
                  <th>
                    {{ "absent_dates" | translate }}
                  </th>
                </thead>
                <tbody>
                  <tr *ngFor="let d of data.detail; let i = index">
                    <td>{{ i + 1 }}</td>
                    <td class="textleft">{{ d.NAME }}</td>
                    <td class="textleft">{{ d.CLASSSEC }}</td>
                    <td class="textleft">{{ formatDate(d.absent) }}</td>
                  </tr>
                </tbody>
              </table>
            </ion-card-content>
          </ion-card>
        </div> -->
      </div>
    </div>
  </pinch-zoom>
</ion-content>